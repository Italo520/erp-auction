(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{63:(e,s,t)=>{"use strict";var a=t(7260);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},176:(e,s,t)=>{Promise.resolve().then(t.bind(t,5587))},1040:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l,a:()=>i});var a=t(5155);t(2115);var r=t(1433);let l=e=>{let{className:s,children:t,noPadding:l=!1,...i}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col rounded-xl bg-white dark:bg-[#1e293b] border border-slate-200 dark:border-slate-700/50 shadow-sm overflow-hidden",!l&&"p-5",s),...i,children:t})},i=e=>{let{className:s,title:t,action:l,icon:i,iconColor:c="text-primary",iconBgColor:d="bg-primary/10",...o}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("flex justify-between items-start mb-2",s),...o,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,a.jsx)("div",{className:(0,r.cn)("p-2 rounded-lg flex items-center justify-center",d,c),children:i}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-[#92a4c9] text-sm font-medium",children:t})]}),l]})}},1142:(e,s,t)=>{"use strict";t.d(s,{m:()=>l});var a=t(5155);t(2115);var r=t(1433);let l=e=>{let{children:s,className:t,fluid:l=!1}=e;return(0,a.jsx)("div",{className:(0,r.cn)("w-full mx-auto px-4 md:px-6 py-6",!l&&"max-w-7xl",t),children:s})}},1360:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1433:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(2821),r=t(5889);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},4197:(e,s,t)=>{"use strict";t.d(s,{y:()=>i});var a=t(5155);t(2115);var r=t(1433);let l=(0,t(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),i=e=>{let{size:s="md",className:t}=e;return(0,a.jsx)(l,{className:(0,r.cn)("animate-spin text-primary",{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[s],t)})}},4947:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},5132:(e,s,t)=>{"use strict";t.d(s,{$:()=>i});var a=t(5155),r=t(2115),l=t(1433);let i=r.forwardRef((e,s)=>{let{className:t,variant:r="primary",size:i="md",isLoading:c=!1,leftIcon:d,rightIcon:o,children:n,disabled:x,fullWidth:m=!1,...h}=e;return(0,a.jsxs)("button",{ref:s,disabled:x||c,className:(0,l.cn)("inline-flex items-center justify-center rounded-lg font-bold leading-normal tracking-[0.015em] transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-1 dark:focus:ring-offset-[#101622]","disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98]","border",{primary:"bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20 border-transparent",secondary:"bg-white dark:bg-[#111722] border-slate-200 dark:border-[#324467] text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-[#232f48]",outline:"bg-transparent border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800",ghost:"bg-transparent border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800",danger:"bg-red-500/10 hover:bg-red-500/20 text-red-500 border-red-500/20"}[r],{sm:"h-9 px-3 text-xs",md:"h-12 md:h-14 px-6 text-sm md:text-base",lg:"h-14 px-8 text-base"}[i],m?"w-full":"",t),...h,children:[c&&(0,a.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),!c&&d&&(0,a.jsx)("span",{className:"mr-2 flex items-center",children:d}),(0,a.jsx)("span",{className:"truncate",children:n}),!c&&o&&(0,a.jsx)("span",{className:"ml-2 flex items-center",children:o})]})});i.displayName="Button"},5587:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(5155),r=t(2115),l=t(1142),i=t(1040),c=t(5626),d=t(6191),o=t(5132),n=t(63),x=t(4197),m=t(6651),h=t(4947),u=t(8720);let p=e=>{let{auctionId:s,onSuccess:t}=e,[l,i]=(0,r.useState)([]),[c,n]=(0,r.useState)([]),[p,v]=(0,r.useState)(""),[f,j]=(0,r.useState)(!0),[g,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y()},[]);let y=async()=>{try{j(!0);let e=await fetch("/api/vehicles/available");if(!e.ok)throw Error("Erro ao buscar ve\xedculos dispon\xedveis");let s=await e.json();i(s.data||[])}catch(e){console.error("Error fetching available vehicles:",e),u.o.error("Erro ao carregar ve\xedculos dispon\xedveis")}finally{j(!1)}},k=async()=>{if(0===c.length)return void u.o.warning("Selecione pelo menos um ve\xedculo");try{b(!0);let e=await fetch("/api/auctions/".concat(s,"/vehicles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vehicleIds:c})}),a=await e.json();if(!e.ok||!a.success)throw Error(a.error||"Erro ao adicionar ve\xedculos");u.o.success("".concat(c.length," ve\xedculo(s) adicionado(s) com sucesso!")),n([]),await y(),null==t||t()}catch(s){console.error("Error adding vehicles:",s);let e=s instanceof Error?s.message:"Erro ao adicionar ve\xedculos";u.o.error(e)}finally{b(!1)}},N=l.filter(e=>{var s;let t=p.toLowerCase();return e.make.toLowerCase().includes(t)||e.model.toLowerCase().includes(t)||e.chassisNumber.toLowerCase().includes(t)||(null==(s=e.plateEnd)?void 0:s.toLowerCase().includes(t))});return f?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)(x.y,{size:"lg"})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por marca, modelo, chassi ou placa...",value:p,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-[#111722] text-slate-900 dark:text-white focus:ring-2 focus:ring-primary"})]}),(0,a.jsx)("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg divide-y divide-slate-200 dark:divide-slate-700 max-h-96 overflow-y-auto",children:0===N.length?(0,a.jsxs)("div",{className:"p-8 text-center text-slate-500",children:[(0,a.jsx)(h.A,{size:48,className:"mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"Nenhum ve\xedculo dispon\xedvel encontrado"})]}):N.map(e=>(0,a.jsxs)("label",{className:"flex items-center p-4 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>(e=>{n(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])})(e.id),className:"w-4 h-4 text-primary border-slate-300 rounded focus:ring-primary"}),(0,a.jsx)("div",{className:"ml-3 flex-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.images&&e.images.length>0&&(0,a.jsx)("img",{src:e.images[0].url,alt:"".concat(e.make," ").concat(e.model),className:"w-16 h-16 object-cover rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-slate-900 dark:text-white",children:[e.make," ",e.model," ",e.version]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[e.yearManufacture,"/",e.yearModel," â€¢ ",e.color]}),(0,a.jsxs)("p",{className:"text-xs text-slate-400",children:["Chassi: ",e.chassisNumber]})]})]})})]},e.id))}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-700",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[c.length," ve\xedculo(s) selecionado(s)"]}),(0,a.jsxs)(o.$,{onClick:k,disabled:0===c.length||g,children:[(0,a.jsx)(d.A,{size:18,className:"mr-2"}),g?"Adicionando...":"Adicionar ao Leil\xe3o"]})]})]})};var v=t(6132),f=t(1360);let j=e=>{let{auctionId:s,refreshKey:t=0,onVehiclesChange:l}=e,[i,c]=(0,r.useState)([]),[d,n]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{p()},[s,t]);let p=async()=>{try{var e;n(!0);let t=await fetch("/api/vehicles?auctionId=".concat(s));if(!t.ok)throw Error("Erro ao buscar ve\xedculos do leil\xe3o");let a=(null==(e=(await t.json()).data)?void 0:e.items)||[];c(a),null==l||l(a)}catch(e){console.error("Error fetching auction vehicles:",e),u.o.error("Erro ao carregar ve\xedculos do leil\xe3o")}finally{n(!1)}},j=async e=>{if(confirm("Tem certeza que deseja remover este ve\xedculo do leil\xe3o?"))try{h(e);let t=await fetch("/api/auctions/".concat(s,"/vehicles/").concat(e),{method:"DELETE"}),a=await t.json();if(!t.ok||!a.success)throw Error(a.error||"Erro ao remover ve\xedculo");u.o.success("Ve\xedculo removido com sucesso!"),await p()}catch(s){console.error("Error removing vehicle:",s);let e=s instanceof Error?s.message:"Erro ao remover ve\xedculo";u.o.error(e)}finally{h(null)}};return d?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)(x.y,{size:"lg"})}):0===i.length?(0,a.jsxs)("div",{className:"text-center p-8 border border-dashed border-slate-300 dark:border-slate-700 rounded-lg",children:[(0,a.jsx)(v.A,{size:48,className:"mx-auto mb-2 text-slate-400"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Nenhum ve\xedculo associado a este leil\xe3o"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Use o seletor acima para adicionar ve\xedculos"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:["Ve\xedculos do Leil\xe3o (",i.length,")"]})}),(0,a.jsx)("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-slate-50 dark:bg-slate-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Lote"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Ve\xedculo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Ano"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Chassi"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Lance Inicial"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-[#111722] divide-y divide-slate-200 dark:divide-slate-700",children:i.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:e.lotNumber||"-"})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.images&&e.images.length>0&&(0,a.jsx)("img",{src:e.images[0].url,alt:"".concat(e.make," ").concat(e.model),className:"w-12 h-12 object-cover rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[e.make," ",e.model]}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:e.version})]})]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.yearManufacture,"/",e.yearModel]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:e.chassisNumber})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:["R$ ",e.initialBid.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>j(e.id),disabled:m===e.id,className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:(0,a.jsx)(f.A,{size:16})})})]},e.id))})]})})]})};function g(e){let{params:s}=e,t=(0,n.useRouter)(),{id:x}=(0,r.use)(s),[m,h]=(0,r.useState)(!1),[u,v]=(0,r.useState)(0);return(0,a.jsxs)(l.m,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)(o.$,{variant:"ghost",className:"p-2",onClick:()=>t.back(),children:(0,a.jsx)(c.A,{size:20})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Gerenciar Leil\xe3o"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Configure os ve\xedculos e detalhes do leil\xe3o"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Ve\xedculos do Leil\xe3o"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Adicione e gerencie os ve\xedculos que far\xe3o parte deste leil\xe3o"})]}),!m&&(0,a.jsxs)(o.$,{onClick:()=>h(!0),children:[(0,a.jsx)(d.A,{size:18,className:"mr-2"}),"Adicionar Ve\xedculos"]})]}),m&&(0,a.jsxs)("div",{className:"mb-6 p-6 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"Selecionar Ve\xedculos"}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:"Fechar"})]}),(0,a.jsx)(p,{auctionId:x,onSuccess:()=>{v(e=>e+1),h(!1)}})]}),(0,a.jsx)(j,{auctionId:x,refreshKey:u,onVehiclesChange:e=>{console.log("Leil\xe3o tem ".concat(e.length," ve\xedculos"))}})]})}),(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"Configura\xe7\xf5es do Leil\xe3o"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Outras configura\xe7\xf5es do leil\xe3o ser\xe3o implementadas aqui."})]})})]})]})}},5626:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6651:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{e.O(0,[779,720,441,255,358],()=>e(e.s=176)),_N_E=e.O()}]);