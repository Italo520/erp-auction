(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[902],{517:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var t=s(5155),r=s(2115),l=s(1142),i=s(9150),o=s(9129),c=s(63),n=s(5626),d=s(5132),m=s(8720),u=s(4197),h=s(6472);function x(e){let{params:a}=e,s=(0,c.useRouter)(),{id:x}=(0,r.use)(a),{getVehicle:f,updateVehicle:v,currentVehicle:p,isLoading:j,error:b}=(0,o.T)(),[g,k]=(0,r.useState)(!1),[N]=(0,r.useState)(()=>new h.F);(0,r.useEffect)(()=>{x&&f(x)},[f,x]);let w=async e=>{k(!0);try{let a=(e.images||[]).filter(e=>e.url&&!e.url.startsWith("blob:")).map(e=>e.url),t=[];if(e.vehicleImageFiles&&e.vehicleImageFiles.length>0)for(let a of e.vehicleImageFiles)try{let e=await N.uploadVehicleImage(a,x);t.push(e)}catch(e){console.error("Erro ao fazer upload de imagem:",e),m.o.error("Erro ao fazer upload de uma das imagens")}let r=[...a,...t];await v(x,{...e,images:r.map((e,a)=>({id:"".concat(x,"-").concat(a),url:e,isCover:0===a}))}),m.o.success("Ve\xedculo atualizado com sucesso!"),s.push("/veiculos/".concat(x))}catch(e){console.error("Erro ao atualizar ve\xedculo:",e),m.o.error("Erro ao atualizar ve\xedculo. Tente novamente.")}finally{k(!1)}};return j?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(u.y,{size:"lg"})}):b||!p?(0,t.jsx)(l.m,{children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Ve\xedculo n\xe3o encontrado"}),(0,t.jsx)("p",{className:"text-slate-500 mb-6",children:b||"O ve\xedculo que voc\xea procura n\xe3o existe ou foi removido."}),(0,t.jsxs)(d.$,{variant:"ghost",onClick:()=>s.back(),children:[(0,t.jsx)(n.A,{size:20,className:"mr-2"}),"Voltar"]})]})}):(0,t.jsxs)(l.m,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)(d.$,{variant:"ghost",className:"p-2",onClick:()=>s.back(),children:(0,t.jsx)(n.A,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Editar Ve\xedculo"}),(0,t.jsxs)("p",{className:"text-slate-500 dark:text-slate-400",children:["Atualize as informa\xe7\xf5es do ve\xedculo ",p.make," ",p.model]})]})]}),(0,t.jsx)("div",{className:"bg-white dark:bg-[#111722] rounded-xl border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:(0,t.jsx)(i.x,{initialData:p,onSubmit:w,isLoading:g})})]})}},2237:(e,a,s)=>{Promise.resolve().then(s.bind(s,517))},4197:(e,a,s)=>{"use strict";s.d(a,{y:()=>i});var t=s(5155);s(2115);var r=s(1433);let l=(0,s(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),i=e=>{let{size:a="md",className:s}=e;return(0,t.jsx)(l,{className:(0,r.cn)("animate-spin text-primary",{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[a],s)})}}},e=>{e.O(0,[779,417,720,334,627,441,255,358],()=>e(e.s=2237)),_N_E=e.O()}]);